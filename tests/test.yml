---
# VPN playbook. Allows to create full-fledged OpenVPN server and issue
# client certificates for it.
#
# Parameters to pass documented in defaults yml
#
# Usage examples:
#
# To install OpenVPN server and issue a client certificate (this task can also
# be ran next times just to issue additional certificates):
# ansible-playbook -i <inventory_file> -b vpn.yml
#
# To revoke client certificate:
# ansible-playbook -i <inventory_file> -b vpn.yml -e 'keys_action=revoke'
#
# Be aware that certificate will be revoked but to apply that revoke, manual
# changes needed in OpenVPN configuration file due to the way easy-rsa creates
# the revokation list.
- name: Install VPN server and create some client certs for it
  hosts: vpn-server
  remote_user: root
  sudo: yes
  vars_prompt:
    - name: "clients"
      prompt: "Please enter login name"
      private: no
    - name: "fullname"
      prompt: "Please enter full name"
      private: no
    - name: "mail"
      prompt: "Please enter email"
      private: no
  roles:
    - vpn







